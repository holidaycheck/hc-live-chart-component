(function () {function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function i(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?j(t):e}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return n(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function n(t,e,r){return(n=m()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&b(a,r.prototype),a}).apply(null,arguments)}function o(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=document.createElement("template");d.innerHTML="\n    <style>\n    :host {\n\t\t--margin: 0.5rem;\n        display: flex;\n        height: auto;\n        width: auto;\n        justify-content: center;\n    }\n    slot[name=sourceCode] {\n        display: block;\n        flex: 1;\n        border: 1px solid black;\n    }\n    ::slotted(textarea) {\n        font-family: monospace;\n        font-size: 1.2rem;\n        width: calc(100% - 2 * var(--margin));\n        height: calc(100% - 2 * var(--margin));\n        padding: var(--margin);\n        margin: 0;\n        border: 0;\n        outline: none;\n    }\n    .chart {\n        flex: 1;\n        border: 1px solid black;\n    }\n    .jsError {\n    \tposition: absolute;\n    \tmargin-top: calc(-1rem - var(--margin));\n    \tright: 50%;\n    \tbackground: rgba(255,0,0,0.7);\n    \tcolor: white;\n    \tpadding: var(--margin);\n    }\n    .hidden {\n    \tdisplay: none;\n    }\n    \n    </style>\n\n    <slot name=\"sourceCode\"></slot>\n    <div slot=\"chart\" class=\"chart\">\n        <canvas style=\"height: 100%;\"></canvas>\n    </div>\n\t<div class=\"jsError hidden\"></div>\n";var p=Object.values({hcblue:"rgba(0, 88, 163, 1.000)",hcyellow:"rgba(251, 215, 58, 1.000)",hcfishorange:"rgba(255, 88, 0, 1.000)",hcdarkblue:"rgba(2, 57, 103, 1.000)",hcawardblue:"rgba(47, 160, 196, 1.000)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"}),e=function(t){function e(){var t;return g(this,e),(t=i(this,c(e).call(this))).attachShadow({mode:"open"}).appendChild(d.content.cloneNode(!0)),t}return k(e,l(HTMLElement)),h(e,[{key:"_selectInShadowRoot",value:function(t){return this.shadowRoot&&this.shadowRoot.querySelector(t)}},{key:"connectedCallback",value:function(){var t=this;Chart.defaults.global.animation.duration=100,this.createChart(),this.evaluateAndRerenderChart(),this.$sourceCode.addEventListener("keyup",function(){t.evaluateAndRerenderChart()})}},{key:"createChart",value:function(){this.chartData={labels:[],datasets:[{backgroundColor:p}]},this.chart=new Chart(this.$chart,{type:"horizontalBar",data:this.chartData,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,gridLines:{offsetGridLines:!0}}]}}})}},{key:"evaluateAndRerenderChart",value:function(){var t;try{t=new Function(this.editedSourceCode)(),this.$jsError.innerHTML="",this.$jsError.classList.add("hidden")}catch(e){this.$jsError.innerHTML=e,this.$jsError.classList.remove("hidden")}this.updateChartData(t)}},{key:"updateChartData",value:function(t){var e=this.chartData;e.labels=t.map(function(t){var e=t.key;return e.length>30?"..."+e.substring(e.length-30):e}),e.datasets[0].data=t.map(function(t){return t.value}),this.chart.update()}},{key:"$sourceCode",get:function(){return this._selectInShadowRoot("slot[name=sourceCode]").assignedNodes()[0]}},{key:"$chart",get:function(){return this._selectInShadowRoot("canvas")}},{key:"$jsError",get:function(){return this._selectInShadowRoot(".jsError")}},{key:"editedSourceCode",get:function(){return this.$sourceCode.value}}]),e}();customElements.define("hc-live-chart",e);})();